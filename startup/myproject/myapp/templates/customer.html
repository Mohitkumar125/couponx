{% extends 'base1.html' %}
{% load static %}
{% block content %}
<div class="container">
  <h2 class="mb-4">Customer Redemption Details</h2>

  <div class="card p-4 mb-4">
    <!-- Search Bar -->
    {% comment %} <div class="search-bar p-3 mb-4 d-flex flex-column flex-md-row justify-content-between align-items-center">
      <span class="fw-semibold">Find Redemptions</span>
      <form class="d-flex w-100 w-md-50 mt-2 mt-md-0" method="get">
        <input 
          class="form-control me-2" 
          type="search" 
          name="q" 
          placeholder="Search by name, mobile, or coupon code" 
          value="{{ request.GET.q|default:'' }}"
        >
        <button class="btn btn-primary" type="submit">Search</button>
      </form> 
    </div>{% endcomment %}

    <!-- Table -->
    <div class="table-responsive">
      <table class="table table-striped table-hover align-middle">
        <thead class="table-light">
          <tr>
            <th>Customer Name</th>
            <th>Mobile Number</th>
            <th>Coupon Code</th>
            <th>Redemption Date</th>
            <th>Prize Won</th>
          </tr>
        </thead>
        <tbody>
          {% for redemption in redemptions %}
          <tr>
            <td data-label="Customer Name">{{ redemption.customer_name }}</td>
            <td data-label="Mobile Number">{{ redemption.mobile_number }}</td>
            <td data-label="Coupon Code">{{ redemption.coupon.code }}</td>
            <td data-label="Redemption Date">{{ redemption.redeemed_at|date:"d M Y, H:i" }}</td>
            <td data-label="Prize Won">
              {% if redemption.prize %}
                {{ redemption.prize.name }}
              {% else %}
                <span class="text-muted">No Prize</span>
              {% endif %}
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="5" class="text-center">No redemptions found.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
